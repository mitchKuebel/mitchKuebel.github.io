<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Food Bytes</title>
        <link rel = "stylesheet" type="text/css" href= "../CSS/fonts.css"/>
        <link rel = "stylesheet" type="text/css" href = "../css/pinkdocs.css"/>

    </head>

    <body>
        <div id = topbar>
            <div style = "height: max-content">
                <img id = "docslogo" src = "../images/docs.png" alt = "logo" width = 30px; style = "margin: 10px; float: left;"/>
                <h2 id="editor1" contenteditable="true" style = "z-index:1000; width:auto; max-width:75%; height: 1em;margin:15px; text-overflow: ellipsis; clear: right; flex-wrap: nowrap; overflow-y: hidden; overflow: hidden;"> Untitled Document</h2>
                <img src = "../images/clock.png" id="clock" alt = "clock" width = 30px style = "position: absolute; right:20%; top: 3%;"/>
                <img src = "../images/comments.png" id="clock" alt = "clock" width = 30px style = "position: absolute; right:17%; top: 3%;"/>
                <a href = "notes.html"><img src = "../images/notes.png" id="clock" alt = "clock" width = 30px style = "position: absolute; right:14%; top: 3%;"/></a>
                <img src = "../images/share.png" id="clock" alt = "clock" width = 30px style = "position: absolute; right:11%; top: 3%;cursor: pointer;" onclick="send()"/>
                <img src = "../images/eagle.png" id="clock" alt = "clock" width = 200px style = "position: absolute; right:0%; top: -1px;"/>
            </div>
            <p  id="author" contenteditable="true" style = "z-index:1000; width:auto; max-width:75%; height: 1em;margin:15px; text-overflow: ellipsis; clear: right; flex-wrap: nowrap; overflow-y: hidden; overflow: hidden;">by: </p>
                <div id = "tabs">
                    <button onclick="tabswitcher(x,xx)" id = "classbuttons">Class Info</button>
                    <button onclick="tabswitcher(y,yy)" id = "generalbuttons">General Notes</button>
                    <button onclick="tabswitcher(z,zz)" id = "homeworkbuttons">Homework</button>
                    <button onclick="tabswitcher(a,aa)" id = "goofybuttons">goofy things</button>
                </div>
        </div>
        <!-- <h1>Mitchgle Docs</h1> -->

        <div id = "noting">
            <div id = "class"  style = "display: none;">
                <div class = "thingy" style = "text-align: center; width:100%; float:left ">
                    <h1>Class Information</h1>
                    <p>Includes Class name, Teacher, Topic for the day, etc.</p>
                    <hr style = "width:50%; text-align: center;border-color: black;"/>
                </div>
                <div class="editor" contenteditable="true" id = "classnotes" style = "clear:both; margin-right: 2%;">
                    Write Class Info Here
                </div>
            </div>
            <div id = "general" style = "display: none;">
                <div class = "thingy" style = "text-align: center; width:100%; float:left ">
                    <h1 >General Notes</h1>
                    <p>All notes relating to the topics. sub-notes are allowed</p>
                    <hr style = "width:50%; text-align: center;border-color: black;"/>
                </div>
                <div class="editor" contenteditable="true" id = "generalnotes" style = "clear:both; margin-right: 2%;">
                    Write General Notes Here
                </div>
            </div>

            <div id = "homework" style = "display: none;">
                <div class = "thingy" style = "text-align: center; width:100%; float:left ">
                    <h1>Homework Notes</h1>
                    <p>This includes what the homework for tonight is!</p>
                    <hr style = "width:50%; text-align: center;border-color: black;"/>
                </div>
                <div class="editor" contenteditable="true" id = "homeworknotes" style = "clear:both; margin-right: 2%;">
                    Write Homework Notes Here
                </div>
            </div>

            <div id = "goofythings" style = "display: none;">
                <div class = "thingy" style = "text-align: center; width:100%; float:left ">
                    <h1 >Goofy Notes</h1>
                    <p>All notes that are not related to the class</p>
                    <hr style = "width:50%; text-align: center;border-color: black;"/>
                </div>
                <div class="editor" contenteditable="true" id = "goofynotes" style = "clear:both; margin-right: 2%;">
                    Write Goofy Notes Here
                </div>
            </div>
        </div>

        <div id = "share" style="display: none;">
            <!-- The pop-up -->
            <div id="export-popup" class="popup">
            <h2>Export Options</h2>
            <button id="export-pdf">Export as PDF</button>
            <button id="export-text">Export as Text</button>
            <button id="export-html" onclick = "downloadHTML()">Export as HTML</button>
            <button id="close-popup">Close</button>
            </div>
        </div>
        
        <script>
            const x = document.getElementById("class");
            const y = document.getElementById("general");
            const z = document.getElementById("homework");
            const a = document.getElementById("goofythings");
            const xx = document.getElementById("classbuttons");
            const yy = document.getElementById("generalbuttons");
            const zz = document.getElementById("homeworkbuttons");
            const aa = document.getElementById("goofybuttons");
            const shares = document.getElementById("share");
            const noting = document.getElementById("noting");
            

            function tabswitcher(section,button){
                x.style.display = "none";
                y.style.display = "none";
                z.style.display = "none";
                a.style.display = "none";


                xx.style.backgroundColor = "#d382bf";
                xx.style.color="black";
                yy.style.backgroundColor="#d382bf";
                yy.style.color="black";
                zz.style.backgroundColor="#d382bf";
                zz.style.color="black";
                aa.style.backgroundColor="#d382bf";
                aa.style.color="black";

                section.style.display="flex";
                button.style.backgroundColor="#7a3168";
                button.style.color="white";

            }
            // function classbutton(){
            //     x.style.display = "flex";
            //     y.style.display = "none";
            //     z.style.display = "none";
            //     a.style.display = "none";
            //     xx.style.backgroundColor = "#7a3168";
            //     xx.style.color="white";
            //     yy.style.backgroundColor="#d382bf";
            //     yy.style.color="black";
            //     zz.style.backgroundColor="#d382bf";
            //     zz.style.color="black";
            //     aa.style.backgroundColor="#d382bf";
            //     aa.style.color="black";
            // }
            // function generalbutton(){
            //     x.style.display = "none";
            //     y.style.display = "flex";
            //     z.style.display = "none";
            //     a.style.display = "none";
            //     yy.style.backgroundColor = "#7a3168";
            //     yy.style.color="white";
            //     xx.style.backgroundColor="#d382bf";
            //     xx.style.color="black";
            //     zz.style.backgroundColor="#d382bf";
            //     zz.style.color="black";
            //     aa.style.backgroundColor="#d382bf";
            //     aa.style.color="black";
            // }
            // function homeworkbutton(){
            //     x.style.display = "none";
            //     y.style.display = "none";
            //     z.style.display = "flex";
            //     a.style.display = "none";
            //     zz.style.backgroundColor = "#7a3168";
            //     zz.style.color="white";
            //     yy.style.backgroundColor="#d382bf";
            //     yy.style.color="black";
            //     xx.style.backgroundColor="#d382bf";
            //     xx.style.color="black";
            //     aa.style.backgroundColor="#d382bf";
            //     aa.style.color="black";
            // }
            // function goofybutton(){
            //     x.style.display = "none";
            //     y.style.display = "none";
            //     z.style.display = "none";
            //     a.style.display = "flex";
            //     aa.style.backgroundColor = "#7a3168";
            //     aa.style.color="white";
            //     yy.style.backgroundColor="#d382bf";
            //     yy.style.color="black";
            //     zz.style.backgroundColor="#d382bf";
            //     zz.style.color="black";
            //     xx.style.backgroundColor="#d382bf";
            //     xx.style.color="black";
            // }


            const editor = document.getElementById('generalnotes');
            const editor1 = document.getElementById('editor1');

            //This is for the title

            // Save content to local storage whenever changes occur
            editor1.addEventListener('input', () => {
                const content1 = editor1.innerHTML;
                localStorage.setItem('editorContent1', content1);
            });
    
            // Load content from local storage on page load
            const savedContent1 = localStorage.getItem('editorContent1');
            if (savedContent1) {
                editor1.innerHTML = savedContent1;
            }

             //This is for the author

            // Save content to local storage whenever changes occur
            author.addEventListener('input', () => {
                const authors = author.innerHTML;
                localStorage.setItem('authorContent', authors);
            });
    
            // Load content from local storage on page load
            const authorsContent = localStorage.getItem('authorContent');
            if (authorsContent) {
                author.innerHTML = authorsContent;
            }



            //This is for the class

            // Save content to local storage whenever changes occur
            classnotes.addEventListener('input', () => {
                const content = classnotes.innerHTML;
                localStorage.setItem('classnotesContent', content);
            });
    
            // Load content from local storage on page load
            const classContent = localStorage.getItem('classnotesContent');
            if (classContent) {
                classnotes.innerHTML = classContent;
            }


            //This is for the general notes

            // Save content to local storage whenever changes occur
            generalnotes.addEventListener('input', () => {
                const content = generalnotes.innerHTML;
                localStorage.setItem('generalnotesContent', content);
            });
    
            // Load content from local storage on page load
            const generalContent = localStorage.getItem('generalnotesContent');
            if (generalContent) {
                generalnotes.innerHTML = generalContent;
            }


            //This is for the homework

            // Save content to local storage whenever changes occur
            homeworknotes.addEventListener('input', () => {
                const content = homeworknotes.innerHTML;
                localStorage.setItem('homeworknotesContent', content);
            });
    
            // Load content from local storage on page load
            const homeworkContent = localStorage.getItem('homeworknotesContent');
            if (homeworkContent) {
                homeworknotes.innerHTML = homeworkContent;
            }


            //This is for the goofy

            // Save content to local storage whenever changes occur
            goofynotes.addEventListener('input', () => {
                const content = goofynotes.innerHTML;
                localStorage.setItem('goofynotesContent', content);
            });
    
            // Load content from local storage on page load
            const goofyContent = localStorage.getItem('goofynotesContent');
            if (goofyContent) {
                goofynotes.innerHTML = goofyContent;
            }


            //sending to html code
            function send(){
                shares.style="display:block";
                noting.style="display:none";


                



            }

            function downloadHTML() {
                const filename = editor1.innerHTML + ".html";
                // Generate the HTML code
                const htmlCode = generateHTML(); // Your code to generate the HTML

                // Create a Blob from the HTML code
                const blob = new Blob([htmlCode], { type: 'text/html' });

                // Create a URL from the Blob
                const url = URL.createObjectURL(blob);

                // Create a download link
                const downloadLink = document.createElement('a');
                downloadLink.href = url;
                downloadLink.download = filename;
                downloadLink.textContent = 'Download HTML';

                // Programmatically trigger the click
                downloadLink.click();

                // Clean up by revoking the URL object
                URL.revokeObjectURL(url);
            }
            
            function generateHTML(){
                const noteTitles = editor1.innerHTML;
                const classInfoNotes = classnotes.innerHTML;
                const generalNoting = generalnotes.innerHTML;
                const homeworkNoting = homeworknotes.innerHTML;
                const goofySidenotes = goofynotes.innerHTML;
                const authorName = author.innerHTML;

                // Your template with placeholders
                const template = `
                <!doctype html>
                <html>
                    <head>
                        <meta charset="utf-8">
                        <title>${noteTitles}</title>
                        <link rel="stylesheet" type="text/css" href="../../../CSS/fonts.css"/>
                        <link rel="stylesheet" type="text/css" href="../../../css/notes.css"/>
                    </head>
                    <body>
                        <img src="../../../images/docs.png" id="docslogo" alt="logo" width="60px" style="margin: 10px; float: left; margin-top: auto; cursor: pointer;" onclick="window.location.href='../../pinkdocs.html'"/>
                        <div id="title">
                            <h1>${noteTitles}</h1>
                            <p>${authorName}</p>
                            <hr/>
                        </div>
                        <div id="info">
                            <h2>Class Info:</h2>
                            <p>${classInfoNotes}</p>
                            <hr/>
                        </div>
                        <div id="info">
                            <h2>General Notes:</h2>
                            <p>${generalNoting}</p>
                            <hr/>
                        </div>
                        <div id="homework">
                            <h2>What's for homework!</h2>
                            <p>${homeworkNoting}</p>
                            <hr/>
                        </div>
                        <div id="goofy">
                            <h2>Goofy Sidenotes:</h2>
                            <p>${goofySidenotes}</p>
                            <hr/>
                        </div>
                    </body>
                </html>
                `;
                return template; //returns the template to the above function
            }
            
        </script>   
    </body>
</html>